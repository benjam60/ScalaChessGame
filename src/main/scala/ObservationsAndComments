How do you structure the code to prevent shotgun surgery?

How do you structure the code to allow plugins? E.g. track the number of pieces
or replay certain moves